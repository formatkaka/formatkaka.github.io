---
import BlogLayout from '../../layouts/BlogLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog', ({ data }) => {
  return data.category === 'books';
});
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BlogLayout title="Blogs">
  <div>
    <h1 class="title">Blogs</h1>
    <ul>
      {
        posts.map((post) => (
          <li class="mb-2">
            <p class="date">
              {post.data.pubDate.toLocaleDateString('en-us', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
              })}
            </p>
            <a href={`/blogs/${post.slug}`} class="link">
              {post.data.title}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</BlogLayout>
